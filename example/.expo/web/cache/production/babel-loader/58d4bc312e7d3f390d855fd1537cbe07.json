{"ast":null,"code":"function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;subClass.__proto__=superClass;}import applyNativeMethods from\"../../modules/applyNativeMethods\";import createElement from\"../createElement\";import css from\"../StyleSheet/css\";import{getAssetByID}from\"../../modules/AssetRegistry\";import resolveShadowValue from\"../StyleSheet/resolveShadowValue\";import ImageLoader from\"../../modules/ImageLoader\";import ImageUriCache from\"./ImageUriCache\";import PixelRatio from\"../PixelRatio\";import StyleSheet from\"../StyleSheet\";import TextAncestorContext from\"../Text/TextAncestorContext\";import View from\"../View\";import React from'react';var STATUS_ERRORED='ERRORED';var STATUS_LOADED='LOADED';var STATUS_LOADING='LOADING';var STATUS_PENDING='PENDING';var STATUS_IDLE='IDLE';var getImageState=function getImageState(uri,shouldDisplaySource){return shouldDisplaySource?STATUS_LOADED:uri?STATUS_PENDING:STATUS_IDLE;};var resolveAssetDimensions=function resolveAssetDimensions(source){if(typeof source==='number'){var _getAssetByID=getAssetByID(source),height=_getAssetByID.height,width=_getAssetByID.width;return{height:height,width:width};}else if(typeof source==='object'){var _height=source.height,_width=source.width;return{height:_height,width:_width};}};var svgDataUriPattern=/^(data:image\\/svg\\+xml;utf8,)(.*)/;var resolveAssetUri=function resolveAssetUri(source){var uri='';if(typeof source==='number'){var asset=getAssetByID(source);var scale=asset.scales[0];if(asset.scales.length>1){var preferredScale=PixelRatio.get();scale=asset.scales.reduce(function(prev,curr){return Math.abs(curr-preferredScale)<Math.abs(prev-preferredScale)?curr:prev;});}var scaleSuffix=scale!==1?\"@\"+scale+\"x\":'';uri=asset?asset.httpServerLocation+\"/\"+asset.name+scaleSuffix+\".\"+asset.type:'';}else if(typeof source==='string'){uri=source;}else if(source&&typeof source.uri==='string'){uri=source.uri;}if(uri){var match=uri.match(svgDataUriPattern);if(match){var prefix=match[1],svg=match[2];var encodedSvg=encodeURIComponent(svg);return\"\"+prefix+encodedSvg;}}return uri;};var filterId=0;var createTintColorSVG=function createTintColorSVG(tintColor,id){return tintColor&&id!=null?React.createElement(\"svg\",{style:{position:'absolute',height:0,visibility:'hidden',width:0}},React.createElement(\"defs\",null,React.createElement(\"filter\",{id:\"tint-\"+id},React.createElement(\"feFlood\",{floodColor:\"\"+tintColor}),React.createElement(\"feComposite\",{in2:\"SourceAlpha\",operator:\"atop\"})))):null;};var Image=function(_React$Component){_inheritsLoose(Image,_React$Component);Image.getSize=function getSize(uri,success,failure){ImageLoader.getSize(uri,success,failure);};Image.prefetch=function prefetch(uri){return ImageLoader.prefetch(uri).then(function(){ImageUriCache.add(uri);ImageUriCache.remove(uri);});};Image.queryCache=function queryCache(uris){var result={};uris.forEach(function(u){if(ImageUriCache.has(u)){result[u]='disk/memory';}});return Promise.resolve(result);};function Image(props,context){var _this;_this=_React$Component.call(this,props,context)||this;_this._filterId=0;_this._imageRef=null;_this._imageRequestId=null;_this._imageState=null;_this._isMounted=false;_this._createLayoutHandler=function(resizeMode){var onLayout=_this.props.onLayout;if(resizeMode==='center'||resizeMode==='repeat'||onLayout){return function(e){var layout=e.nativeEvent.layout;onLayout&&onLayout(e);_this.setState(function(){return{layout:layout};});};}};_this._getBackgroundSize=function(resizeMode){if(_this._imageRef&&(resizeMode==='center'||resizeMode==='repeat')){var _this$_imageRef=_this._imageRef,naturalHeight=_this$_imageRef.naturalHeight,naturalWidth=_this$_imageRef.naturalWidth;var _this$state$layout=_this.state.layout,height=_this$state$layout.height,width=_this$state$layout.width;if(naturalHeight&&naturalWidth&&height&&width){var scaleFactor=Math.min(1,width/naturalWidth,height/naturalHeight);var x=Math.ceil(scaleFactor*naturalWidth);var y=Math.ceil(scaleFactor*naturalHeight);return{backgroundSize:x+\"px \"+y+\"px\"};}}};_this._onError=function(){var _this$props=_this.props,onError=_this$props.onError,source=_this$props.source;_this._updateImageState(STATUS_ERRORED);if(onError){onError({nativeEvent:{error:\"Failed to load resource \"+resolveAssetUri(source)+\" (404)\"}});}_this._onLoadEnd();};_this._onLoad=function(e){var _this$props2=_this.props,onLoad=_this$props2.onLoad,source=_this$props2.source;var event={nativeEvent:e};ImageUriCache.add(resolveAssetUri(source));_this._updateImageState(STATUS_LOADED);if(onLoad){onLoad(event);}_this._onLoadEnd();};_this._setImageRef=function(ref){_this._imageRef=ref;};var uri=resolveAssetUri(props.source);var shouldDisplaySource=ImageUriCache.has(uri);_this.state={layout:{},shouldDisplaySource:shouldDisplaySource};_this._imageState=getImageState(uri,shouldDisplaySource);_this._filterId=filterId;filterId++;return _this;}var _proto=Image.prototype;_proto.componentDidMount=function componentDidMount(){this._isMounted=true;if(this._imageState===STATUS_PENDING){this._createImageLoader();}else if(this._imageState===STATUS_LOADED){this._onLoad({target:this._imageRef});}};_proto.componentDidUpdate=function componentDidUpdate(prevProps){var prevUri=resolveAssetUri(prevProps.source);var uri=resolveAssetUri(this.props.source);var hasDefaultSource=this.props.defaultSource!=null;if(prevUri!==uri){ImageUriCache.remove(prevUri);var isPreviouslyLoaded=ImageUriCache.has(uri);isPreviouslyLoaded&&ImageUriCache.add(uri);this._updateImageState(getImageState(uri,isPreviouslyLoaded),hasDefaultSource);}else if(hasDefaultSource&&prevProps.defaultSource!==this.props.defaultSource){this._updateImageState(this._imageState,hasDefaultSource);}if(this._imageState===STATUS_PENDING){this._createImageLoader();}};_proto.componentWillUnmount=function componentWillUnmount(){var uri=resolveAssetUri(this.props.source);ImageUriCache.remove(uri);this._destroyImageLoader();this._isMounted=false;};_proto.renderImage=function renderImage(hasTextAncestor){var shouldDisplaySource=this.state.shouldDisplaySource;var _this$props3=this.props,accessibilityLabel=_this$props3.accessibilityLabel,accessibilityRelationship=_this$props3.accessibilityRelationship,accessibilityRole=_this$props3.accessibilityRole,accessibilityState=_this$props3.accessibilityState,accessible=_this$props3.accessible,blurRadius=_this$props3.blurRadius,defaultSource=_this$props3.defaultSource,draggable=_this$props3.draggable,importantForAccessibility=_this$props3.importantForAccessibility,nativeID=_this$props3.nativeID,pointerEvents=_this$props3.pointerEvents,resizeMode=_this$props3.resizeMode,source=_this$props3.source,testID=_this$props3.testID;if(process.env.NODE_ENV!=='production'){if(this.props.children){throw new Error('The <Image> component cannot contain children. If you want to render content on top of the image, consider using the <ImageBackground> component or absolute positioning.');}}var selectedSource=shouldDisplaySource?source:defaultSource;var displayImageUri=resolveAssetUri(selectedSource);var imageSizeStyle=resolveAssetDimensions(selectedSource);var backgroundImage=displayImageUri?\"url(\\\"\"+displayImageUri+\"\\\")\":null;var flatStyle=_objectSpread({},StyleSheet.flatten(this.props.style));var finalResizeMode=resizeMode||flatStyle.resizeMode||'cover';var filters=[];var tintColor=flatStyle.tintColor;if(flatStyle.filter){filters.push(flatStyle.filter);}if(blurRadius){filters.push(\"blur(\"+blurRadius+\"px)\");}if(flatStyle.shadowOffset){var shadowString=resolveShadowValue(flatStyle);if(shadowString){filters.push(\"drop-shadow(\"+shadowString+\")\");}}if(flatStyle.tintColor){filters.push(\"url(#tint-\"+this._filterId+\")\");}delete flatStyle.shadowColor;delete flatStyle.shadowOpacity;delete flatStyle.shadowOffset;delete flatStyle.shadowRadius;delete flatStyle.tintColor;delete flatStyle.overlayColor;delete flatStyle.resizeMode;var hiddenImage=displayImageUri?createElement('img',{alt:accessibilityLabel||'',classList:[classes.accessibilityImage],draggable:draggable||false,ref:this._setImageRef,src:displayImageUri}):null;return React.createElement(View,{accessibilityLabel:accessibilityLabel,accessibilityRelationship:accessibilityRelationship,accessibilityRole:accessibilityRole,accessibilityState:accessibilityState,accessible:accessible,importantForAccessibility:importantForAccessibility,nativeID:nativeID,onLayout:this._createLayoutHandler(finalResizeMode),pointerEvents:pointerEvents,style:[styles.root,hasTextAncestor&&styles.inline,imageSizeStyle,flatStyle],testID:testID},React.createElement(View,{style:[styles.image,resizeModeStyles[finalResizeMode],this._getBackgroundSize(finalResizeMode),backgroundImage&&{backgroundImage:backgroundImage},filters.length>0&&{filter:filters.join(' ')}]}),hiddenImage,createTintColorSVG(tintColor,this._filterId));};_proto.render=function render(){var _this2=this;return React.createElement(TextAncestorContext.Consumer,null,function(hasTextAncestor){return _this2.renderImage(hasTextAncestor);});};_proto._createImageLoader=function _createImageLoader(){var source=this.props.source;this._destroyImageLoader();var uri=resolveAssetUri(source);this._imageRequestId=ImageLoader.load(uri,this._onLoad,this._onError);this._onLoadStart();};_proto._destroyImageLoader=function _destroyImageLoader(){if(this._imageRequestId){ImageLoader.abort(this._imageRequestId);this._imageRequestId=null;}};_proto._onLoadEnd=function _onLoadEnd(){var onLoadEnd=this.props.onLoadEnd;if(onLoadEnd){onLoadEnd();}};_proto._onLoadStart=function _onLoadStart(){var _this$props4=this.props,defaultSource=_this$props4.defaultSource,onLoadStart=_this$props4.onLoadStart;this._updateImageState(STATUS_LOADING,defaultSource!=null);if(onLoadStart){onLoadStart();}};_proto._updateImageState=function _updateImageState(status,hasDefaultSource){if(hasDefaultSource===void 0){hasDefaultSource=false;}this._imageState=status;var shouldDisplaySource=this._imageState===STATUS_LOADED||this._imageState===STATUS_LOADING&&!hasDefaultSource;if(shouldDisplaySource!==this.state.shouldDisplaySource){if(this._isMounted){this.setState(function(){return{shouldDisplaySource:shouldDisplaySource};});}}};return Image;}(React.Component);Image.displayName='Image';var classes=css.create({accessibilityImage:_objectSpread({},StyleSheet.absoluteFillObject,{height:'100%',opacity:0,width:'100%',zIndex:-1})});var styles=StyleSheet.create({root:{flexBasis:'auto',overflow:'hidden',zIndex:0},inline:{display:'inline-flex'},image:_objectSpread({},StyleSheet.absoluteFillObject,{backgroundColor:'transparent',backgroundPosition:'center',backgroundRepeat:'no-repeat',backgroundSize:'cover',height:'100%',width:'100%',zIndex:-1})});var resizeModeStyles=StyleSheet.create({center:{backgroundSize:'auto'},contain:{backgroundSize:'contain'},cover:{backgroundSize:'cover'},none:{backgroundPosition:'0 0',backgroundSize:'auto'},repeat:{backgroundPosition:'0 0',backgroundRepeat:'repeat',backgroundSize:'auto'},stretch:{backgroundSize:'100% 100%'}});export default applyNativeMethods(Image);","map":{"version":3,"sources":["/Users/joel/Projects/crypto/genericcoin/example/node_modules/react-native-web/dist/exports/Image/index.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","_inheritsLoose","subClass","superClass","prototype","create","constructor","__proto__","applyNativeMethods","createElement","css","getAssetByID","resolveShadowValue","ImageLoader","ImageUriCache","PixelRatio","StyleSheet","TextAncestorContext","View","React","STATUS_ERRORED","STATUS_LOADED","STATUS_LOADING","STATUS_PENDING","STATUS_IDLE","getImageState","uri","shouldDisplaySource","resolveAssetDimensions","_getAssetByID","height","width","_height","_width","svgDataUriPattern","resolveAssetUri","asset","scale","scales","preferredScale","get","reduce","prev","curr","Math","abs","scaleSuffix","httpServerLocation","name","type","match","prefix","svg","encodedSvg","encodeURIComponent","filterId","createTintColorSVG","tintColor","id","style","position","visibility","floodColor","in2","operator","Image","_React$Component","getSize","success","failure","prefetch","then","add","remove","queryCache","uris","result","u","has","Promise","resolve","props","context","_this","call","_filterId","_imageRef","_imageRequestId","_imageState","_isMounted","_createLayoutHandler","resizeMode","onLayout","e","layout","nativeEvent","setState","_getBackgroundSize","_this$_imageRef","naturalHeight","naturalWidth","_this$state$layout","state","scaleFactor","min","x","ceil","y","backgroundSize","_onError","_this$props","onError","_updateImageState","error","_onLoadEnd","_onLoad","_this$props2","onLoad","event","_setImageRef","ref","_proto","componentDidMount","_createImageLoader","componentDidUpdate","prevProps","prevUri","hasDefaultSource","defaultSource","isPreviouslyLoaded","componentWillUnmount","_destroyImageLoader","renderImage","hasTextAncestor","_this$props3","accessibilityLabel","accessibilityRelationship","accessibilityRole","accessibilityState","accessible","blurRadius","draggable","importantForAccessibility","nativeID","pointerEvents","testID","process","env","NODE_ENV","children","Error","selectedSource","displayImageUri","imageSizeStyle","backgroundImage","flatStyle","flatten","finalResizeMode","filters","shadowOffset","shadowString","shadowColor","shadowOpacity","shadowRadius","overlayColor","hiddenImage","alt","classList","classes","accessibilityImage","src","styles","root","inline","image","resizeModeStyles","join","render","_this2","Consumer","load","_onLoadStart","abort","onLoadEnd","_this$props4","onLoadStart","status","Component","displayName","absoluteFillObject","opacity","zIndex","flexBasis","overflow","display","backgroundColor","backgroundPosition","backgroundRepeat","center","contain","cover","none","repeat","stretch"],"mappings":"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","sourcesContent":["function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\n/**\n * Copyright (c) Nicolas Gallagher.\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\nimport applyNativeMethods from '../../modules/applyNativeMethods';\nimport createElement from '../createElement';\nimport css from '../StyleSheet/css';\nimport { getAssetByID } from '../../modules/AssetRegistry';\nimport resolveShadowValue from '../StyleSheet/resolveShadowValue';\nimport ImageLoader from '../../modules/ImageLoader';\nimport ImageUriCache from './ImageUriCache';\nimport PixelRatio from '../PixelRatio';\nimport StyleSheet from '../StyleSheet';\nimport TextAncestorContext from '../Text/TextAncestorContext';\nimport View from '../View';\nimport React from 'react';\nvar STATUS_ERRORED = 'ERRORED';\nvar STATUS_LOADED = 'LOADED';\nvar STATUS_LOADING = 'LOADING';\nvar STATUS_PENDING = 'PENDING';\nvar STATUS_IDLE = 'IDLE';\n\nvar getImageState = function getImageState(uri, shouldDisplaySource) {\n  return shouldDisplaySource ? STATUS_LOADED : uri ? STATUS_PENDING : STATUS_IDLE;\n};\n\nvar resolveAssetDimensions = function resolveAssetDimensions(source) {\n  if (typeof source === 'number') {\n    var _getAssetByID = getAssetByID(source),\n        height = _getAssetByID.height,\n        width = _getAssetByID.width;\n\n    return {\n      height: height,\n      width: width\n    };\n  } else if (typeof source === 'object') {\n    var _height = source.height,\n        _width = source.width;\n    return {\n      height: _height,\n      width: _width\n    };\n  }\n};\n\nvar svgDataUriPattern = /^(data:image\\/svg\\+xml;utf8,)(.*)/;\n\nvar resolveAssetUri = function resolveAssetUri(source) {\n  var uri = '';\n\n  if (typeof source === 'number') {\n    // get the URI from the packager\n    var asset = getAssetByID(source);\n    var scale = asset.scales[0];\n\n    if (asset.scales.length > 1) {\n      var preferredScale = PixelRatio.get(); // Get the scale which is closest to the preferred scale\n\n      scale = asset.scales.reduce(function (prev, curr) {\n        return Math.abs(curr - preferredScale) < Math.abs(prev - preferredScale) ? curr : prev;\n      });\n    }\n\n    var scaleSuffix = scale !== 1 ? \"@\" + scale + \"x\" : '';\n    uri = asset ? asset.httpServerLocation + \"/\" + asset.name + scaleSuffix + \".\" + asset.type : '';\n  } else if (typeof source === 'string') {\n    uri = source;\n  } else if (source && typeof source.uri === 'string') {\n    uri = source.uri;\n  }\n\n  if (uri) {\n    var match = uri.match(svgDataUriPattern); // inline SVG markup may contain characters (e.g., #, \") that need to be escaped\n\n    if (match) {\n      var prefix = match[1],\n          svg = match[2];\n      var encodedSvg = encodeURIComponent(svg);\n      return \"\" + prefix + encodedSvg;\n    }\n  }\n\n  return uri;\n};\n\nvar filterId = 0;\n\nvar createTintColorSVG = function createTintColorSVG(tintColor, id) {\n  return tintColor && id != null ? React.createElement(\"svg\", {\n    style: {\n      position: 'absolute',\n      height: 0,\n      visibility: 'hidden',\n      width: 0\n    }\n  }, React.createElement(\"defs\", null, React.createElement(\"filter\", {\n    id: \"tint-\" + id\n  }, React.createElement(\"feFlood\", {\n    floodColor: \"\" + tintColor\n  }), React.createElement(\"feComposite\", {\n    in2: \"SourceAlpha\",\n    operator: \"atop\"\n  })))) : null;\n};\n\nvar Image =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(Image, _React$Component);\n\n  Image.getSize = function getSize(uri, success, failure) {\n    ImageLoader.getSize(uri, success, failure);\n  };\n\n  Image.prefetch = function prefetch(uri) {\n    return ImageLoader.prefetch(uri).then(function () {\n      // Add the uri to the cache so it can be immediately displayed when used\n      // but also immediately remove it to correctly reflect that it has no active references\n      ImageUriCache.add(uri);\n      ImageUriCache.remove(uri);\n    });\n  };\n\n  Image.queryCache = function queryCache(uris) {\n    var result = {};\n    uris.forEach(function (u) {\n      if (ImageUriCache.has(u)) {\n        result[u] = 'disk/memory';\n      }\n    });\n    return Promise.resolve(result);\n  };\n\n  function Image(props, context) {\n    var _this;\n\n    _this = _React$Component.call(this, props, context) || this; // If an image has been loaded before, render it immediately\n\n    _this._filterId = 0;\n    _this._imageRef = null;\n    _this._imageRequestId = null;\n    _this._imageState = null;\n    _this._isMounted = false;\n\n    _this._createLayoutHandler = function (resizeMode) {\n      var onLayout = _this.props.onLayout;\n\n      if (resizeMode === 'center' || resizeMode === 'repeat' || onLayout) {\n        return function (e) {\n          var layout = e.nativeEvent.layout;\n          onLayout && onLayout(e);\n\n          _this.setState(function () {\n            return {\n              layout: layout\n            };\n          });\n        };\n      }\n    };\n\n    _this._getBackgroundSize = function (resizeMode) {\n      if (_this._imageRef && (resizeMode === 'center' || resizeMode === 'repeat')) {\n        var _this$_imageRef = _this._imageRef,\n            naturalHeight = _this$_imageRef.naturalHeight,\n            naturalWidth = _this$_imageRef.naturalWidth;\n        var _this$state$layout = _this.state.layout,\n            height = _this$state$layout.height,\n            width = _this$state$layout.width;\n\n        if (naturalHeight && naturalWidth && height && width) {\n          var scaleFactor = Math.min(1, width / naturalWidth, height / naturalHeight);\n          var x = Math.ceil(scaleFactor * naturalWidth);\n          var y = Math.ceil(scaleFactor * naturalHeight);\n          return {\n            backgroundSize: x + \"px \" + y + \"px\"\n          };\n        }\n      }\n    };\n\n    _this._onError = function () {\n      var _this$props = _this.props,\n          onError = _this$props.onError,\n          source = _this$props.source;\n\n      _this._updateImageState(STATUS_ERRORED);\n\n      if (onError) {\n        onError({\n          nativeEvent: {\n            error: \"Failed to load resource \" + resolveAssetUri(source) + \" (404)\"\n          }\n        });\n      }\n\n      _this._onLoadEnd();\n    };\n\n    _this._onLoad = function (e) {\n      var _this$props2 = _this.props,\n          onLoad = _this$props2.onLoad,\n          source = _this$props2.source;\n      var event = {\n        nativeEvent: e\n      };\n      ImageUriCache.add(resolveAssetUri(source));\n\n      _this._updateImageState(STATUS_LOADED);\n\n      if (onLoad) {\n        onLoad(event);\n      }\n\n      _this._onLoadEnd();\n    };\n\n    _this._setImageRef = function (ref) {\n      _this._imageRef = ref;\n    };\n\n    var uri = resolveAssetUri(props.source);\n    var shouldDisplaySource = ImageUriCache.has(uri);\n    _this.state = {\n      layout: {},\n      shouldDisplaySource: shouldDisplaySource\n    };\n    _this._imageState = getImageState(uri, shouldDisplaySource);\n    _this._filterId = filterId;\n    filterId++;\n    return _this;\n  }\n\n  var _proto = Image.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this._isMounted = true;\n\n    if (this._imageState === STATUS_PENDING) {\n      this._createImageLoader();\n    } else if (this._imageState === STATUS_LOADED) {\n      this._onLoad({\n        target: this._imageRef\n      });\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var prevUri = resolveAssetUri(prevProps.source);\n    var uri = resolveAssetUri(this.props.source);\n    var hasDefaultSource = this.props.defaultSource != null;\n\n    if (prevUri !== uri) {\n      ImageUriCache.remove(prevUri);\n      var isPreviouslyLoaded = ImageUriCache.has(uri);\n      isPreviouslyLoaded && ImageUriCache.add(uri);\n\n      this._updateImageState(getImageState(uri, isPreviouslyLoaded), hasDefaultSource);\n    } else if (hasDefaultSource && prevProps.defaultSource !== this.props.defaultSource) {\n      this._updateImageState(this._imageState, hasDefaultSource);\n    }\n\n    if (this._imageState === STATUS_PENDING) {\n      this._createImageLoader();\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    var uri = resolveAssetUri(this.props.source);\n    ImageUriCache.remove(uri);\n\n    this._destroyImageLoader();\n\n    this._isMounted = false;\n  };\n\n  _proto.renderImage = function renderImage(hasTextAncestor) {\n    var shouldDisplaySource = this.state.shouldDisplaySource;\n    var _this$props3 = this.props,\n        accessibilityLabel = _this$props3.accessibilityLabel,\n        accessibilityRelationship = _this$props3.accessibilityRelationship,\n        accessibilityRole = _this$props3.accessibilityRole,\n        accessibilityState = _this$props3.accessibilityState,\n        accessible = _this$props3.accessible,\n        blurRadius = _this$props3.blurRadius,\n        defaultSource = _this$props3.defaultSource,\n        draggable = _this$props3.draggable,\n        importantForAccessibility = _this$props3.importantForAccessibility,\n        nativeID = _this$props3.nativeID,\n        pointerEvents = _this$props3.pointerEvents,\n        resizeMode = _this$props3.resizeMode,\n        source = _this$props3.source,\n        testID = _this$props3.testID;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.props.children) {\n        throw new Error('The <Image> component cannot contain children. If you want to render content on top of the image, consider using the <ImageBackground> component or absolute positioning.');\n      }\n    }\n\n    var selectedSource = shouldDisplaySource ? source : defaultSource;\n    var displayImageUri = resolveAssetUri(selectedSource);\n    var imageSizeStyle = resolveAssetDimensions(selectedSource);\n    var backgroundImage = displayImageUri ? \"url(\\\"\" + displayImageUri + \"\\\")\" : null;\n\n    var flatStyle = _objectSpread({}, StyleSheet.flatten(this.props.style));\n\n    var finalResizeMode = resizeMode || flatStyle.resizeMode || 'cover'; // CSS filters\n\n    var filters = [];\n    var tintColor = flatStyle.tintColor;\n\n    if (flatStyle.filter) {\n      filters.push(flatStyle.filter);\n    }\n\n    if (blurRadius) {\n      filters.push(\"blur(\" + blurRadius + \"px)\");\n    }\n\n    if (flatStyle.shadowOffset) {\n      var shadowString = resolveShadowValue(flatStyle);\n\n      if (shadowString) {\n        filters.push(\"drop-shadow(\" + shadowString + \")\");\n      }\n    }\n\n    if (flatStyle.tintColor) {\n      filters.push(\"url(#tint-\" + this._filterId + \")\");\n    } // these styles were converted to filters\n\n\n    delete flatStyle.shadowColor;\n    delete flatStyle.shadowOpacity;\n    delete flatStyle.shadowOffset;\n    delete flatStyle.shadowRadius;\n    delete flatStyle.tintColor; // these styles are not supported on View\n\n    delete flatStyle.overlayColor;\n    delete flatStyle.resizeMode; // Accessibility image allows users to trigger the browser's image context menu\n\n    var hiddenImage = displayImageUri ? createElement('img', {\n      alt: accessibilityLabel || '',\n      classList: [classes.accessibilityImage],\n      draggable: draggable || false,\n      ref: this._setImageRef,\n      src: displayImageUri\n    }) : null;\n    return React.createElement(View, {\n      accessibilityLabel: accessibilityLabel,\n      accessibilityRelationship: accessibilityRelationship,\n      accessibilityRole: accessibilityRole,\n      accessibilityState: accessibilityState,\n      accessible: accessible,\n      importantForAccessibility: importantForAccessibility,\n      nativeID: nativeID,\n      onLayout: this._createLayoutHandler(finalResizeMode),\n      pointerEvents: pointerEvents,\n      style: [styles.root, hasTextAncestor && styles.inline, imageSizeStyle, flatStyle],\n      testID: testID\n    }, React.createElement(View, {\n      style: [styles.image, resizeModeStyles[finalResizeMode], this._getBackgroundSize(finalResizeMode), backgroundImage && {\n        backgroundImage: backgroundImage\n      }, filters.length > 0 && {\n        filter: filters.join(' ')\n      }]\n    }), hiddenImage, createTintColorSVG(tintColor, this._filterId));\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return React.createElement(TextAncestorContext.Consumer, null, function (hasTextAncestor) {\n      return _this2.renderImage(hasTextAncestor);\n    });\n  };\n\n  _proto._createImageLoader = function _createImageLoader() {\n    var source = this.props.source;\n\n    this._destroyImageLoader();\n\n    var uri = resolveAssetUri(source);\n    this._imageRequestId = ImageLoader.load(uri, this._onLoad, this._onError);\n\n    this._onLoadStart();\n  };\n\n  _proto._destroyImageLoader = function _destroyImageLoader() {\n    if (this._imageRequestId) {\n      ImageLoader.abort(this._imageRequestId);\n      this._imageRequestId = null;\n    }\n  };\n\n  _proto._onLoadEnd = function _onLoadEnd() {\n    var onLoadEnd = this.props.onLoadEnd;\n\n    if (onLoadEnd) {\n      onLoadEnd();\n    }\n  };\n\n  _proto._onLoadStart = function _onLoadStart() {\n    var _this$props4 = this.props,\n        defaultSource = _this$props4.defaultSource,\n        onLoadStart = _this$props4.onLoadStart;\n\n    this._updateImageState(STATUS_LOADING, defaultSource != null);\n\n    if (onLoadStart) {\n      onLoadStart();\n    }\n  };\n\n  _proto._updateImageState = function _updateImageState(status, hasDefaultSource) {\n    if (hasDefaultSource === void 0) {\n      hasDefaultSource = false;\n    }\n\n    this._imageState = status;\n    var shouldDisplaySource = this._imageState === STATUS_LOADED || this._imageState === STATUS_LOADING && !hasDefaultSource; // only triggers a re-render when the image is loading and has no default image (to support PJPEG), loaded, or failed\n\n    if (shouldDisplaySource !== this.state.shouldDisplaySource) {\n      if (this._isMounted) {\n        this.setState(function () {\n          return {\n            shouldDisplaySource: shouldDisplaySource\n          };\n        });\n      }\n    }\n  };\n\n  return Image;\n}(React.Component);\n\nImage.displayName = 'Image';\nvar classes = css.create({\n  accessibilityImage: _objectSpread({}, StyleSheet.absoluteFillObject, {\n    height: '100%',\n    opacity: 0,\n    width: '100%',\n    zIndex: -1\n  })\n});\nvar styles = StyleSheet.create({\n  root: {\n    flexBasis: 'auto',\n    overflow: 'hidden',\n    zIndex: 0\n  },\n  inline: {\n    display: 'inline-flex'\n  },\n  image: _objectSpread({}, StyleSheet.absoluteFillObject, {\n    backgroundColor: 'transparent',\n    backgroundPosition: 'center',\n    backgroundRepeat: 'no-repeat',\n    backgroundSize: 'cover',\n    height: '100%',\n    width: '100%',\n    zIndex: -1\n  })\n});\nvar resizeModeStyles = StyleSheet.create({\n  center: {\n    backgroundSize: 'auto'\n  },\n  contain: {\n    backgroundSize: 'contain'\n  },\n  cover: {\n    backgroundSize: 'cover'\n  },\n  none: {\n    backgroundPosition: '0 0',\n    backgroundSize: 'auto'\n  },\n  repeat: {\n    backgroundPosition: '0 0',\n    backgroundRepeat: 'repeat',\n    backgroundSize: 'auto'\n  },\n  stretch: {\n    backgroundSize: '100% 100%'\n  }\n});\nexport default applyNativeMethods(Image);"]},"metadata":{},"sourceType":"module"}